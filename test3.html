<!DOCTYPE html>
<html>
<head>
    <title>Cropper.js with Draggable Text Overlay for Video</title>
    <style>
        /* Add your custom CSS styles here */
        #video-container {
            position: relative;
            display: inline-block;
        }

        #video {
            max-width: 100%;
        }

        #text-overlay {
            position: absolute;
            font-size: 24px;
            color: white;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid white;
            padding: 5px;
            cursor: move;
            pointer-events: auto;
            user-select: none; /* Prevent text selection */
        }
    </style>
</head>
<body>
    <div id="video-container">
        <video id="video" width="500px" src="input.mp4"></video>
        <div style="width:200px" id="text-overlay" contenteditable></div>
    </div>

    <script>
        // Get the video and text overlay elements
        const video = document.getElementById('video');
        const textOverlay = document.getElementById('text-overlay');
        // Position the text overlay at the center of the video by default
        const containerWidth = video.offsetWidth;
        const containerHeight = video.offsetHeight;
        const textWidth = textOverlay.offsetWidth;
        const textHeight = textOverlay.offsetHeight;

        const initialX = (containerWidth - textWidth) / 2;
        const initialY = (containerHeight - textHeight) / 2;
        console.log(containerWidth);

        textOverlay.style.left = `${initialX}px`;
        textOverlay.style.top = `${initialY}px`;

        // Make the text overlay draggable
        let isDragging = false;
        let offsetX, offsetY;

        textOverlay.addEventListener('mousedown', (e) => {
            isDragging = true;
            offsetX = e.clientX - textOverlay.getBoundingClientRect().left;
            offsetY = e.clientY - textOverlay.getBoundingClientRect().top;
        });

        document.addEventListener('mousemove', (e) => {
            if (isDragging) {
                const x = e.clientX - offsetX;
                const y = e.clientY - offsetY;
                updateTextPosition(x, y);
            }
        });

        document.addEventListener('mouseup', () => {
            isDragging = false;
        });

        // Function to update the text overlay position
        function updateTextPosition(x, y) {
            const minX = 0;
            const maxX = containerWidth - textWidth;
            const minY = 0;
            const maxY = containerHeight - textHeight;

            const constrainedX = Math.min(Math.max(x, minX), maxX);
            const constrainedY = Math.min(Math.max(y, minY), maxY);

            textOverlay.style.left = `${constrainedX}px`;
            textOverlay.style.top = `${constrainedY}px`;
        }

  
    </script>
</body>
</html>
